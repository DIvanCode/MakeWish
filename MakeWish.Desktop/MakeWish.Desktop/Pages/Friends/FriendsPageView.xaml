<UserControl x:Class="MakeWish.Desktop.Pages.Friends.FriendsPageView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:MakeWish.Desktop.Pages.Friends"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             mc:Ignorable="d"
             d:DataContext="{d:DesignInstance Type=local:FriendsPage}">
    <materialDesign:Card Padding="32" Margin="16">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <Button Grid.Row="0"
                    Content="{Binding User.DisplayName}"
                    Visibility="{Binding ShowUserDisplayName, Converter={StaticResource BooleanToVisibilityConverter}}"
                    Command="{Binding NavigateToProfileCommand}"
                    CommandParameter="{Binding User.Id}"
                    Style="{StaticResource MaterialDesignFlatButton}"
                    FontSize="30"
                    FontWeight="SemiBold"
                    Height="Auto"
                    HorizontalAlignment="Left" />

            <StackPanel Grid.Row="1"
                        Orientation="Horizontal"
                        Margin="0,20,0,20">
                <Button Content="{Binding ConfirmedFriendsButtonDisplayText}"
                        Command="{Binding SelectConfirmedFriendsCommand}"
                        FontSize="18"
                        Height="Auto"
                        Margin="0,0,10,0">
                    <Button.Style>
                        <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignFlatButton}">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsConfirmedFriendsSelected}">
                                    <Setter Property="BorderThickness" Value="0,0,0,2"/>
                                    <Setter Property="BorderBrush" Value="{DynamicResource PrimaryHueMidBrush}"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                <Button Content="{Binding PendingFriendsToUserButtonDisplayText}"
                        Visibility="{Binding ShowPendingFriends, Converter={StaticResource BooleanToVisibilityConverter}}"
                        Command="{Binding SelectPendingFriendsToUserCommand}"
                        FontSize="18"
                        Height="Auto"
                        Margin="0,0,10,0">
                    <Button.Style>
                        <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignFlatButton}">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsPendingFriendsToUserSelected}">
                                    <Setter Property="BorderThickness" Value="0,0,0,2"/>
                                    <Setter Property="BorderBrush" Value="{DynamicResource PrimaryHueMidBrush}"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                <Button Content="{Binding PendingFriendsFromUserButtonDisplayText}"
                        Visibility="{Binding ShowPendingFriends, Converter={StaticResource BooleanToVisibilityConverter}}"
                        Command="{Binding SelectPendingFriendsFromUserCommand}"
                        FontSize="18"
                        Height="Auto"
                        Margin="0,0,10,0">
                    <Button.Style>
                        <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignFlatButton}">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsPendingFriendsFromUserSelected}">
                                    <Setter Property="BorderThickness" Value="0,0,0,2"/>
                                    <Setter Property="BorderBrush" Value="{DynamicResource PrimaryHueMidBrush}"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </StackPanel>
            
            <StackPanel Grid.Row="2">
                <StackPanel Visibility="{Binding IsConfirmedFriendsSelected, Converter={StaticResource BooleanToVisibilityConverter}}"
                            Margin="0,20,16,0">
                    <ItemsControl ItemsSource="{Binding ConfirmedFriends}"
                                  Margin="0, 16,0, 0">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Button Command="{Binding DataContext.NavigateToProfileCommand,
                                                    RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            CommandParameter="{Binding Id}"
                                            Style="{StaticResource MaterialDesignFlatButton}"
                                            Margin="0, 12, 0, 0"
                                            HorizontalAlignment="Left"
                                            Padding="8,4">
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                            <materialDesign:PackIcon Kind="Account"
                                                                     Width="24"
                                                                     Height="24"
                                                                     Margin="0,0,8,0" />
                                            <TextBlock Text="{Binding DisplayName}"
                                                       FontSize="14"
                                                       VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </Button>
                                    <Button Content="Удалить"
                                            Visibility="{Binding DataContext.ShowFriendsManageButtons,
                                                            Converter={StaticResource BooleanToVisibilityConverter},
                                                            RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            Command="{Binding DataContext.RemoveFriendCommand,
                                                    RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            CommandParameter="{Binding Id}"
                                            Style="{StaticResource MaterialDesignOutlinedButton}"
                                            Margin="0, 12, 0, 0"
                                            HorizontalAlignment="Left"
                                            Padding="8,4" />
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
                <StackPanel Visibility="{Binding IsPendingFriendsToUserSelected, Converter={StaticResource BooleanToVisibilityConverter}}"
                            Margin="0,20,16,0">
                    <ItemsControl ItemsSource="{Binding PendingFriendsToUser}"
                                  Margin="0, 16,0, 0">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Button Command="{Binding DataContext.ShowUserCardCommand,
                                                    RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            CommandParameter="{Binding Id}"
                                            Style="{StaticResource MaterialDesignFlatButton}"
                                            Margin="0, 12, 0, 0"
                                            HorizontalAlignment="Left"
                                            Padding="8,4">
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                            <materialDesign:PackIcon Kind="Account"
                                                                     Width="24"
                                                                     Height="24"
                                                                     Margin="0,0,8,0" />
                                            <TextBlock Text="{Binding DisplayName}"
                                                       FontSize="14"
                                                       VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </Button>
                                    <Button Content="Принять"
                                            Visibility="{Binding DataContext.ShowFriendsManageButtons,
                                                            Converter={StaticResource BooleanToVisibilityConverter},
                                                            RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            Command="{Binding DataContext.ConfirmFriendCommand,
                                                    RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            CommandParameter="{Binding Id}"
                                            Style="{StaticResource MaterialDesignOutlinedButton}"
                                            Margin="0, 12, 0, 0"
                                            HorizontalAlignment="Left"
                                            Padding="8,4" />
                                    <Button Content="Отклонить"
                                            Visibility="{Binding DataContext.ShowFriendsManageButtons,
                                                            Converter={StaticResource BooleanToVisibilityConverter},
                                                            RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            Command="{Binding DataContext.RejectFriendCommand,
                                                    RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            CommandParameter="{Binding Id}"
                                            Style="{StaticResource MaterialDesignOutlinedButton}"
                                            Margin="0, 12, 0, 0"
                                            HorizontalAlignment="Left"
                                            Padding="8,4" />
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
                <StackPanel Visibility="{Binding IsPendingFriendsFromUserSelected, Converter={StaticResource BooleanToVisibilityConverter}}"
                            Margin="0,20,16,0">
                    <ItemsControl ItemsSource="{Binding PendingFriendsFromUser}"
                                  Margin="0, 16,0, 0">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Button Command="{Binding DataContext.ShowUserCardCommand,
                                                    RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            CommandParameter="{Binding Id}"
                                            Style="{StaticResource MaterialDesignFlatButton}"
                                            Margin="0, 12, 0, 0"
                                            HorizontalAlignment="Left"
                                            Padding="8,4">
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                            <materialDesign:PackIcon Kind="Account"
                                                                     Width="24"
                                                                     Height="24"
                                                                     Margin="0,0,8,0" />
                                            <TextBlock Text="{Binding DisplayName}"
                                                       FontSize="14"
                                                       VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </Button>
                                    <Button Content="Отменить"
                                            Visibility="{Binding DataContext.ShowFriendsManageButtons,
                                                            Converter={StaticResource BooleanToVisibilityConverter},
                                                            RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            Command="{Binding DataContext.CancelFriendCommand,
                                                    RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            CommandParameter="{Binding Id}"
                                            Style="{StaticResource MaterialDesignOutlinedButton}"
                                            Margin="0, 12, 0, 0"
                                            HorizontalAlignment="Left"
                                            Padding="8,4" />
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </StackPanel>
        </Grid>
    </materialDesign:Card>
</UserControl>
