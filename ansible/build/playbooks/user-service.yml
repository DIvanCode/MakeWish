- name: Build and push UserService to Docker hub
  hosts: Local
  connection: local
  vars_files:
    - ../../vars.yml
  tasks:
    - name: Build Docker image
      docker_image:
        name: divancode74/makewish-user-service
        tag: "{{ user_service_tag }}"
        source: build
        build:
          path: ../../../MakeWish.UserService
    - name: Push Docker image to Docker Hub
      docker_image:
        name: divancode74/makewish-user-service
        tag: "{{ user_service_tag }}"
        push: true
        source: local
